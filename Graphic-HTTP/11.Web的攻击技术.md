### Web的攻击技术

##### 针对Web的攻击技术
HTTP是一个通用的单纯协议机制，不具备回话（Session）管理、加密处理等功能安全性方面的功能。因此在安全方面还是比较劣势。

###### 在客户端即可篡改请求
在HTTP请求内加载攻击代码，就可以发起Web应用的攻击。通过URL查询字段或表单、HTTP首部、Cookie等途径把攻击代码传入，如果Web应用存在安全漏洞，那信息就会早到窃取或被攻击者拿到管理权限。

###### 针对Web应用的攻击模式
* 主动攻击：指攻击者通过直接访问Web应用，把攻击代码传入的攻击模式。代表的有SQL注入和OS命令注入攻击。
* 被动攻击：指利用圈套策略执行攻击模式，不直接对目标Web服务器发动攻击（主要是跨站脚本攻击和跨站点请求伪造）。

![被动攻击步骤](https://wx3.sinaimg.cn/large/005VwC5mly1g79tbbqyjwj30ls09vjur.jpg)

##### 因输出值转义不完全引发的安全漏洞
实施Web应用的安全策略分为以下两部分：
* 客户端的验证
* 服务器端的验证（输入值验证、输出值转义）

###### 跨站脚本攻击
跨站脚本攻击（Cross-Site Scripting，XSS）是指通过浏览器运行非法的HTML标签或JavaScript进行的一种攻击。（尤其是用户评论的，回复中如果包含了JS脚本，其他用户访问到的时候，则会触发到本JS脚本的执行。）

影响：
* 骗取用户个人信息。
* 窃取用户Cookie，帮助攻击者发送恶意请求。
* 显示伪造的文章或图片（应该指的是 iframe之类的标签，引入了其他资源）。

因为前端学的不怎么好，就不看源代码与案例了。总结之后就是通过非法的JS脚本，导致执行了代码。

##### SQL注入攻击
SQL注入（SQL Injection）是指针对Web应用使用的数据库，通过运行非法的SQL而产生的攻击。

经典的曾经字符串"+"的操作：

`select * from user where username= and pwd=`

当使用这种sql的时候，且不检查类型，传入的`pwd`值为`123456 or 1=1`的时候，那么无论是什么用户名就会登录，当然现在基本都会修改成MD5或者其他加密，亦或者通过用户名查询之后进行对比密码。反正无论是什么类型，都可以防止这种类型的`SQL注入`，当然SQL如果存了其他的JS代码，也有可能会导致其他用户再浏览的时候，遭受到影响，造成XSS攻击。

也可以看书本中的例子，是一个挺好的注入例子。

影响：
* 非法查看或篡改数据库内数据
* 规避认证
* 执行和数据库服务器业务关联的程序

##### OS命令注入攻击
OS命令注入攻击（OS Command Injection）是指通过Web应用，执行非法的操作系统命令达到攻击的目的。

###### HTTP首部注入攻击
HTTP首部注入攻击（HTTP Header Injection）是指通过在响应首部字段内插入换行符，添加任意响应首部或主体的一种攻击方式。

影响：
* 设置任何Cookie信息
* 重定向到任意URL
* 显示任意主体（HTTP响应截断攻击）

这个不是很了解，也不进行深入了。

##### 邮件首部注入攻击
邮件首部注入（Mail Header Injection）是指Web应用中的邮件发送功能，通过向邮件首部To或Subject内添加非法内容发起的攻击。

###### 目录遍历攻击
目录遍历（Directory Traversal）攻击是指对本无意公开的文件目录，通过非法截断其目录路径后，达成访问的一种攻击。

###### 远程文件包含攻击
远程文件包含漏洞（Remote File Inclusion）是指当部分脚本内容需要从其他文件读入时，攻击者利用指定外部服务器的URL充当依赖文件，让脚本读取之后，就可以运行任意脚本的一种攻击。主要是PHP存在的安全漏洞。

##### 因设置或设计上的缺陷引发的安全漏洞

###### 强制浏览
强制浏览（Force Browsing）安全漏洞是指，从安置在Web服务器的公开目录中，访问那些原本非自愿公开的文件。
影响：
* 泄漏个人信息等重要情报
* 泄漏原本需要具有访问权限的用户才能查看的内容
* 泄漏未外连到外界的文件

###### 不正确的消息处理
不正确的错误消息处理（Error Handling Vulnerability）的安全漏洞是指，Web应用的错误信息将包含对攻击者有用的信息。（之前记得在那看过为什么同意异常处理，不要抛出原始信息，因为这样攻击者很容易猜想到你的代码结构，导致攻击。）

###### 开放重定向
开放重定向（Open Redirect）是一种对指定的URL做重定向跳转的功能。因此次漏洞是指，可能会导致用户被重定向到其他Web网站。

##### 因回话管理疏忽引发的安全漏洞

###### 会话劫持
会话劫持（Session Hijack）是指攻击者通过某种手段，拿到了用户的回话ID，并非法使用此ID伪装成用户（这个ID指的是Session ID 吗？ 这个不是服务端进行维护的吗？）。

这里案例看着像是Token之类的。

![会话劫持](https://ws3.sinaimg.cn/large/005VwC5mly1g79v4dd0y8j30mo0c5n2g.jpg)

具备认证功能的Web应用，使用会话ID的会话管理机制，作为管理认证状态的主流方式。会话ID中记录客户的Cookie等信息。

击中获得会话ID的途径：
* 通过非正规方法生成推测会话ID
* 通过窃听或XSS的攻击盗取会话ID
* 通过会话固定攻击（Session Fixation）强行获取会话ID

案例具体看书中。

###### 跨站点请求伪造
跨站点请求伪造（Cross-Site Request Forgeries，CSRF）攻击是指攻击者通过设置好的陷阱，强制对已完成认证的用户进行非预期的个人信息或设定信息等某种状态更新。

影响：
* 利用已通过认证的用户权限更新设定信息等
* 利用已通过认证的用户权限购买商品
* 利用已公国认证的用户权限在留言板上发表言论

![跨站点请求伪造](https://wx3.sinaimg.cn/large/005VwC5mly1g79val851oj30m70e7grq.jpg)

从图中可以看出，其实是点了不该点的连接，导致了这种情况。

##### 其他安全漏洞
