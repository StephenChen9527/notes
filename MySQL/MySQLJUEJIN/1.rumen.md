## 1.MySQL

* mysqlId：运行这个可执行文件就可以直接启动一个服务器进程
* mysqlId_safe：是一个启动脚本，它会间接的调用mysqld，而且还顺便启动了另外一个监控进程，这个监控进程在服务器进程挂了的时候，可以帮助重启它。另外，使用mysqld_safe启动服务器程序时，它会将服务器程序的出错信息和其他诊断信息重定向到某个文件中，产生出错日志，这样可以方便我们找出发生错误的原因。
* msql.server：也是一个启动脚本，它会间接的调用mysqld_safe，在调用mysql.server时在后边指定start参数就可以启动服务器程序了，就像这样：
```bash
mysql.server start
mysql.server stop
```
需要注意的是，这个 mysql.server 文件其实是一个链接文件，它的实际文件是 ../support-files/mysql.server。
* mysqld_multi：其实我们一台计算机上也可以运行多个服务器实例，也就是运行多个MySQL服务器进程。mysql_multi可执行文件可以对每一个服务器进程的启动或停止进行监控。（暂时不用）

#### windows下
windows 下也是在bin目录，如果使用的是安装程序，可以直接在本目录打开cmd，然后`mysql -h -u -p`登录

| 参数 |                                                      含义                                                       |
|:----:|:---------------------------------------------------------------------------------------------------------------:|
| `-h` | `host` 或者`--host=` 表示服务器进程所在计算机的域名或者IP地址，如果服务器进程就运行在本机的话，可以省略这个参数 |
| `-P` |                                     `port`或者`--port`，表示端口，默认3306                                      |
| `-u` |                                  表示用户名。也可以写作 `--user`=用户名的形式                                   |
| `-p` |                                  表示密码。也可以写作` --password`=密码的形式。                                   |

`mysql -h127.0.01 -uroot -p123456` `-`与参数之间不要有空格

离开命令:
* `quit`
* `exit`
* `\q`

MySQL默认启动监听的端口是`3306`，如果被占用，可以在启动的时候`mysqld -P3307`指定端口（一般Linux中）

#### 客户端与服务器连接的过程
MySQL支持3种通信方式
* TCP/IP
  普遍使用的都是通过TCP/IP协议来进行通信的，一般是指定host、port、username、password连接上的
* 命名管道和内存共享
  Windwos用户中可以考虑命名管道和共享内存来通信。
  1. 使用`命名管道`进行通信：需要启动服务程序时加上 `--enable-named-pipe`参数，在启动连接客户端时候，加入`--pipe`或者`--protocol=pipe`
  2. 使用`共享内存`进行通信：需要启动服务程序时加上 `--shared-memory`参数，在启动连接客户端时候，加入`--protocol=memory`
  `共享内存`方式需要在同一台Windows上，话说。。。谁会这么搞。。

* Unxi域套接字文件
  如果在启动服务时,指定了主机名为`localhost`或者`--protocol=socket`，就可以使用套接字来通信了。默认监听的套接字文件为：`/temp/mysql.sock`
  1. 服务端可以`mysqld --socket=/tmp/a.txt`指定套接字文件
  2. 客户端可以`mysql -hlocalhost -uroot --socket=/tmp/a.txt -p` 指定套接字文件
  感觉这个玩意也不靠谱，本来数据库都要读磁盘IO操作了，这又通过文件进行文件读取吗？

#### 服务端处理客户端请求

![请求处理过程](https://tva1.sinaimg.cn/large/005VwC5mly1gdfojdhzaaj30n90feabx.jpg)

处理请求大致分为3个部分：`连接管理`、`解析与优化`、`存储引擎`

##### 连接管理

当一个客户端连接到服务器进程时，服务器都会创建一个线程来专门处理交互。当该客户端退出时会与客户端断开连接，服务器并不会立即把与该客户端交互的线程毁掉，而是缓存起来，在另一个新的客户端再进行连接时，把这个缓存线程分配给该客户端（线程池的原理）。

如果客户端程序和服务器程序不运行在一台计算机上，我们还可以采用使用了SSL（安全套接字）的网络连接进行通信，来保证数据传输的安全性。

当连接建立后，与该客户端关联的服务器线程会一直等待客户端发送过来的请求，MySQL服务器接收到的请求只是一个文本消息，该文本消息还要经过各种处理。

##### 解析与优化

1. 查询缓存

MySQL查询会先从缓存中查找，看是否最近已经查询过，如果命中缓存，则直接返回缓存即可，多个客户端可以共享缓存。

其中：如果两个查询请求在任何字符上的不同（空格、注释、大小写），都不会命中缓存。
     另外：如果查询中包含某些系统函数、用户自定义变量和函数、一些系统表，如 mysql 、information_schema、 performance_schema 数据库中的表，那这个请求就不会被缓存。

缓存失效情况：MySQL的缓存系统会监测涉及到的每张表，只要该表的结构或者数据被修改，如对该表使用了INSERT、 UPDATE、DELETE、TRUNCATE TABLE、ALTER TABLE、DROP TABLE或 DROP DATABASE语句，那使用该表的所有高速缓存查询都将变为无效并从高速缓存中删除！

从MySQL 5.7.20开始，不推荐使用查询缓存，并在MySQL 8.0中删除。

2. 语法解析

如果查询缓存没有命中，接下来就需要进入正式的查询阶段了。因为客户端程序发送过来的请求只是一段文本而已，所以MySQL服务器程序首先要对这段文本做分析，判断请求的语法是否正确，然后从文本中将要查询的表、各种查询条件都提取出来放到MySQL服务器内部使用的一些数据结构上来。

3. 查询优化

语法解析之后，服务器程序获得到了需要的信息，比如要查询的列是哪些，表是哪个，搜索条件是什么等等，但光有这些是不够的，因为我们写的MySQL语句执行起来效率可能并不是很高，MySQL的优化程序会对我们的语句做一些优化，如外连接转换为内连接、表达式简化、子查询转为连接吧啦吧啦的一堆东西。优化的结果就是生成一个执行计划，这个执行计划表明了应该使用哪些索引进行查询，表之间的连接顺序是啥样的。

* 存储引擎

MySQL服务器把数据的存储和提取操作都封装到`存储引擎`的木块里。表是逻辑上的概念，物理上如何表示记录，怎么写入具体的屋里存储器上，都是`存储引擎`负责。

#### 常用的存储引擎

|  存储引擎   |                描述                |
|:-----------:|:----------------------------------:|
|  `ARCHIVE`  |           用于数据库存档           |
| `BLACKHOLE` |   丢弃写操作，读操作会返回空内容   |
|    `CVS`    | 在存储数据时，以逗号分隔各个数据项 |
| `FEDERATED` |           用来访问远程表           |
|  `InnoDB`   |   具备外键支持功能的事务存储引擎   |
|  `MEMORY`   |            置于内存的表            |
|   `NERGE`   |  用来管理多个MyISAM表构成的表集合  |
|  `MyISAM`   |      主要的非事务处理存储引擎      |
|    `NDB`    |       MySQL集群专用存储引擎        |

主要的就是`MyISAM`和`InnoDB`

#### 设置表的存储引擎
我们可以为不同的表设置不同的存储引擎。

创建表的时候可以指定
  ```MySQL
    CREATE TABLE TABLENAME(

      ) ENGINE = 存储引擎


    ALTER TABLE 表名 ENGINE = 存储引擎名称;
  ```

创建数据库的时候可以将整个数据库设置为InnoDB，这样
