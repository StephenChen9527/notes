# 17.组合查询
## 组合查询
多数SQL查询都只包含一个或多个表中返回数据的单条`SELECT`语句。MySQL也允许执行多个查询（多条SELECT语句），并将结果作为单个查询结果集返回。这些组合查询通畅称为并（union）或复合查询。

ps：这个不是子查询吗？？？

以下两种情况需要用到：
1. 在单个查询中从不同的表返回类似结构的数据
2. 对单个表执行多个查询，按单个查询返回数据

>`组合查询和多个WHERE条件` 多数情况下，组合相同表的两个查完成的工作与具有多个WHERE子句条件的单条查询完成的工作相同。换句话说，任何具有多个WHERE子句的SELECT语句都可以作为一个组合查询给出，在以下段落中可以看到这一点。这两种技术在不同的查询中性能也不同。因此，应该试一下这两种技术，以确定对特定的查询哪一种性能更好。

## 创建组合查询
主要使用`UNION`。

在书中的例子是两个`SELECT`句子组成的。

`SELECT vend_id,prod_id,prod_price FROM products WHERE prod_price<=5 UNION SELECT vend_id,prod_id,prod_price FROM products WHERE vend_id IN(1001,1002)`

这个是上面的情况2.`UNION`指示MySQL执行两条SELECT语句，并把输出组合成单个查询结果集。

`UNION`规则：
* `UNION`必须是由两条或两条以上的`SELECT`语句组成，语句之间用`UNION`分割。
* `UNION`中每个查询必须包含相同的列、表达式或聚集函数（不需要相同的次序）
* 列数据类型必须兼容：类型可不比完全相同，但必须是DBMS可以隐含地转换类型。

`UNION`会从查询结果集中自动去除了重复的行，这是`UNION`的默认行为，如果需要重复行则改为`UNION ALL`即可。

如果在`UNION`的语句中使用`ORDER BY`子句，则只能出现在最后一条`SELECT`语句之后。

`UNION`也可以组合不同的表，合并成一个结果集，不过这种的需要注意一下类型需要兼容！

## 总结
本章主要讲了`UNION`关键字，在多张表合并一个结果集貌似还没有见过...单张表执行多个`SELECT`语句倒是有可能使用....
