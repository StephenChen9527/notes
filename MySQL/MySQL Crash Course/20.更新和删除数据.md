# 20.更新和删除数据
## 20.1更新数据
更新主要使用`UPDATE`语句，主要有：
1. 更新表中特定行
2. 更新表中所有行

两者的区别，在于有没有使用`WHERE`子句。。。。。一般更新肯定不会更新所有行，这样子所有的数据都挂了，因此更新时一定要小心再小心，一定要看好一定有`WHERE`子句。。。。

`UPDATE`语句构成：
* 要更新的表
* 列名和它们的新值
* 确定要更新行的过滤条件（可以省略，但是省略就是更新所有行了）

`UPDATE table SET col=val WHEHE....;`

这个是最简单的更新语句。

如要更新多个值则为：

`UPDATE table SET col1=val1,col2=val2,col3=val3 WHEHE....;`

每个`列=值`直接用逗号，且最后一个无需逗号。

`UPDATE`语句中可以使用子查询进行过滤条件。

如果是用UPDATE语句更新多行，并且在更新这些行中的一行或者多行时出现错误，整个`UPDATE`操作会被取消（之前更改的也会被回滚）。为即使是发生错误，也继续更新，可以使用`IGNORE`关键字。如`UPDATE IGNORE table....`


## 删除数据
从表中删除数据主要使用`DELETE`语句（以前老拼成`DELETED`...）：
1. 从表中删除特定行
2. 从表中删除所有行

与`UPDATE`语句一样，一般不会操作所有数据，因此一定要注意`WHERE`子句！！！！否则就删库跑路吧。。。

删除语句很简单，如：

`DELETE FROM table WHERE...;`当然`WHERE`可以省略。。。。

`DELETE`语句是从表中删除行，甚至是删除表中所有行，但是并不是删除表本身。

更快的删除请使用`TRUNCATE TABLE`语句，这个是直接删除本表，并且重新创建（怪不得删除之后ID也会自动从新开始）。

## 更新和删除的知道原则
* 除非确实打算更新或删除每一行，否则一定要带上`WHERE`子句。
* 保证每个表都有主键，尽可能在`WHERE`子句中使用。
* 在`UPDATE`或`DELETE`之前，应先用`SELECT`进行测试，保证过滤的是正确的记录。
* 使用强制实施引用完整性的数据库（外键关联）。

MySQL没有撤销，因此要非常小心的使用`UPDATE`和`DELETE`。

## 总结
本章主要学习了`UPDATE`和`DELETE`两个语法。

`UPDATE`用于更新，还是比较多的。

`DELETE`用于删除比较少见，因为这个是物理删除。

一般在业务上，会使用一个标志性的字段，标志是否删除，如果想要删除数据，仅仅是更新这个字段而已，毕竟保留数据还是方便日后查看的。

同时也要切记，两个用法一定要跟`WHERE`子句连用，否则就删库跑路吧...
